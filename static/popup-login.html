<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>로그인 완료</title>
  </head>
  <body>
    <p>로그인 처리 중...</p>
    <script>
      window.onload = () => {
        const params = new URLSearchParams(window.location.search);
        const access_token = params.get("access_token");
        const refresh_token = params.get("refresh_token");

        const user = {
          id: params.get("id"),
          nickname: params.get("nickname"),
          email: params.get("email"),
          profileImage: params.get("profileImage"),
        };

        window.opener.postMessage(
          {
            access_token,
            refresh_token,
            user,
          },
          window.location.origin // 보안상 도메인 명시
        );

        window.close();
      };
    </script>
  </body>
</html>

